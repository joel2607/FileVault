
type User {
  id: ID!
  username: String!
  isAdmin: Boolean!
  storageUsed: Int!
  storageQuota: Int!
  files: [File!]!
}

type File {
  id: ID!
  filename: String!
  mimetype: String!
  size: Int!
  hash: String!
  owner: User!
  createdAt: String!
  updatedAt: String!
  downloadCount: Int!
  isPublic: Boolean!
}

type Folder {
  id: ID!
  name: String!
  owner: User!
  files: [File!]!
  subfolders: [Folder!]!
  parent: Folder
  isPublic: Boolean!
}

input UploadFileInput {
  filename: String!
  mimetype: String!
  size: Int!
  hash: String!
}

input CreateFolderInput {
  name: String!
  parentId: ID
}

type Query {
  files(filter: FileFilterInput): [File!]!
  file(id: ID!): File
  users: [User!]!
  user(id: ID!): User
  folders(parentId: ID): [Folder!]!
  folder(id: ID!): Folder
}

input FileFilterInput {
  mimetype: String
  sizeRange: [Int!]
  dateRange: [String!]
  tags: [String!]
  uploader: String
}

type Mutation {
  uploadFile(input: UploadFileInput!): File!
  createFolder(input: CreateFolderInput!): Folder!
  deleteFile(id: ID!): Boolean!
  shareFile(id: ID!, isPublic: Boolean!): File!
}
